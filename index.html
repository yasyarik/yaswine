<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>YAS Wine Blog</title>
  <meta name="description" content="Wine guides, tasting notes, and practical advice." />
  <link rel="icon" type="image/png" href="/logo.png" />
  <style>
    :root {
      --bg-0: #0a0514;
      --bg-1: #1a0a2e;
      --bg-2: #2d1b4e;
      --accent: #8b5cf6;
      --accent-2: #22d3ee;
      --glass-bg: rgba(255,255,255,.04);
      --glass-brd: rgba(255,255,255,.12);
      --text: #eceaf7;
      --muted: #b8b4cb;
      --anim-speed: 18s;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, sans-serif;
      color: var(--text);
      background: var(--bg-0);
      overflow-x: hidden;
    }
    .bg {
      position: fixed; inset: 0; z-index: -1;
      background: linear-gradient(135deg, var(--bg-0), var(--bg-1), var(--bg-2));
    }
    .bg::before {
      content: ""; position: absolute; inset: -20%;
      background:
        radial-gradient(circle at 15% 25%, color-mix(in srgb, var(--accent) 45%, transparent) 0%, transparent 35%),
        radial-gradient(circle at 85% 15%, color-mix(in srgb, var(--accent-2) 35%, transparent) 0%, transparent 35%),
        radial-gradient(circle at 50% 75%, color-mix(in srgb, var(--accent) 30%, transparent) 0%, transparent 40%);
      background-size: 200% 200%;
      animation: drift var(--anim-speed) ease-in-out infinite;
      filter: saturate(1.05);
    }
    body.anim-pulse .bg::before { animation-name: pulse; }
    body.anim-wave .bg::before { animation-name: wave; }
    @keyframes drift { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    @keyframes pulse { 0%,100%{transform:scale(1)} 50%{transform:scale(1.06)} }
    @keyframes wave { 0%,100%{transform:translateX(0)} 50%{transform:translateX(3%)} }

    .container { width: min(1220px, calc(100% - 40px)); margin: 0 auto; }
    .glass {
      background: var(--glass-bg);
      border: 1px solid var(--glass-brd);
      border-radius: 20px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    header { position: sticky; top: 0; z-index: 30; margin-top: 16px; }
    .nav { display: flex; align-items: center; justify-content: space-between; padding: 14px 18px; }
    .brand { display: flex; align-items: center; gap: 10px; text-decoration: none; color: var(--text); font-weight: 700; }
    .brand img { width: 34px; height: 34px; border-radius: 10px; object-fit: cover; }
    .links { display: flex; gap: 18px; align-items: center; }
    .links a { color: var(--muted); text-decoration: none; font-weight: 600; }
    .links a:hover { color: #fff; }

    .hero {
      margin-top: 24px;
      padding: 48px 28px;
      display: grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 24px;
      align-items: center;
    }
    .hero h1 { margin: 0 0 14px; font-size: clamp(34px, 6vw, 58px); line-height: 1.05; }
    .hero p { margin: 0; color: var(--muted); font-size: clamp(17px, 2vw, 20px); }
    .hero .cta { margin-top: 22px; display: inline-block; background: var(--accent); color:#fff; text-decoration:none; font-weight:700; padding:12px 20px; border-radius:12px; }
    .hero .art { min-height: 280px; border-radius: 18px; overflow: hidden; border:1px solid var(--glass-brd); background: #120b22 center/cover no-repeat; }

    section { margin-top: 26px; }
    .section-card { padding: 22px; }
    .section-title { margin: 0 0 12px; font-size: 28px; }

    .cats { display: grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap: 12px; }
    .cat { padding: 14px 12px; border-radius: 12px; border:1px solid var(--glass-brd); background: rgba(255,255,255,.03); font-weight: 600; color: #e8e3ff; text-align: center; }

    .carousel { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(280px, 1fr); gap: 14px; overflow-x: auto; scroll-snap-type: x mandatory; padding-bottom: 6px; }
    .carousel::-webkit-scrollbar { height: 8px; }
    .carousel::-webkit-scrollbar-thumb { background: rgba(255,255,255,.2); border-radius: 999px; }
    .post-card { scroll-snap-align: start; border:1px solid var(--glass-brd); border-radius: 14px; overflow: hidden; background: rgba(255,255,255,.03); }
    .post-thumb { height: 160px; background: linear-gradient(135deg,#22143e,#111827); }
    .post-body { padding: 14px; }
    .post-body h3 { margin: 0 0 8px; font-size: 19px; line-height: 1.2; }
    .post-body p { margin: 0; color: var(--muted); font-size: 14px; }

    .latest-grid { display: grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap: 14px; }
    .about { display:grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .about .box { padding: 16px; border:1px solid var(--glass-brd); border-radius: 12px; background: rgba(255,255,255,.03); }
    footer { margin: 22px 0 30px; padding: 14px 18px; display:flex; justify-content: space-between; gap: 10px; font-size: 13px; color: var(--muted); }

    @media (max-width: 1024px) {
      .hero { grid-template-columns: 1fr; }
      .cats { grid-template-columns: repeat(2,minmax(0,1fr)); }
      .latest-grid { grid-template-columns: repeat(2,minmax(0,1fr)); }
      .about { grid-template-columns: 1fr; }
    }
    @media (max-width: 700px) {
      .links { gap: 12px; }
      .latest-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="bg"></div>

  <header class="container">
    <nav class="nav glass">
      <a class="brand" href="/">
        <img src="/logo.png" alt="Logo" />
        <span data-site-name>YAS Wine</span>
      </a>
      <div class="links">
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        <a href="#" id="lang-switch">EN</a>
      </div>
    </nav>
  </header>

  <main class="container">
    <section class="hero glass">
      <div>
        <h1 data-hero-title>Actionable insights for modern content teams</h1>
        <p data-hero-subtitle>Playbooks, frameworks, and practical workflows from real execution.</p>
        <a class="cta" href="/blog/">Read latest posts</a>
      </div>
      <div class="art" id="hero-art" style="background-image:url('/hero_ai.jpg')"></div>
    </section>

    <section class="glass section-card">
      <h2 class="section-title">Top Categories</h2>
      <div class="cats" id="top-categories">
        <div class="cat">Strategy</div>
        <div class="cat">AI Workflows</div>
        <div class="cat">SEO</div>
        <div class="cat">Growth</div>
      </div>
    </section>

    <section class="glass section-card">
      <h2 class="section-title">Featured Articles</h2>
      <div class="carousel" id="featured-carousel"></div>
    </section>

    <section class="glass section-card">
      <h2 class="section-title">Latest Articles</h2>
      <div class="latest-grid" id="latest-grid"></div>
    </section>

    <section class="glass section-card about">
      <div class="box">
        <h3>About this blog</h3>
        <p id="about-text">A focused publication for operators who build, ship, and optimize digital products.</p>
      </div>
      <div class="box">
        <h3>Subscribe</h3>
        <p>Get new posts weekly. Add your newsletter or Telegram CTA here.</p>
      </div>
    </section>
  </main>

  <footer class="container glass">
    <span>Â© <span id="year"></span> <span data-site-name>YAS Wine</span></span>
    <span><a href="/sitemap.xml" style="color:inherit">Sitemap</a></span>
  </footer>

  <script src="/theme.config.js"></script>
  <script>
    const postsFallback = [
      { title: 'No posts yet', description: 'First generated article will appear here.', href: '/blog/' },
      { title: 'Use Factory to create drafts', description: 'Create -> Rewrite -> Publish workflow.', href: '/factory/' },
      { title: 'Turn insights into content', description: 'Keep cadence with scheduled publishing.', href: '/blog/' }
    ];

    function applyTheme(cfg) {
      if (!cfg) return;
      const root = document.documentElement;
      if (cfg.colors) {
        if (cfg.colors.bg0) root.style.setProperty('--bg-0', cfg.colors.bg0);
        if (cfg.colors.bg1) root.style.setProperty('--bg-1', cfg.colors.bg1);
        if (cfg.colors.bg2) root.style.setProperty('--bg-2', cfg.colors.bg2);
        if (cfg.colors.accent) root.style.setProperty('--accent', cfg.colors.accent);
        if (cfg.colors.accent2) root.style.setProperty('--accent-2', cfg.colors.accent2);
      }
      if (cfg.animationSpeedSec) root.style.setProperty('--anim-speed', cfg.animationSpeedSec + 's');
      if (cfg.animationType) document.body.classList.add('anim-' + cfg.animationType);
      if (cfg.siteName) document.querySelectorAll('[data-site-name]').forEach(el => el.textContent = cfg.siteName);
      if (cfg.heroTitle) document.querySelector('[data-hero-title]').textContent = cfg.heroTitle;
      if (cfg.heroSubtitle) document.querySelector('[data-hero-subtitle]').textContent = cfg.heroSubtitle;
      if (cfg.heroImage) document.getElementById('hero-art').style.backgroundImage = "url('" + cfg.heroImage + "')";
      if (Array.isArray(cfg.topCategories) && cfg.topCategories.length) {
        const box = document.getElementById('top-categories');
        box.innerHTML = cfg.topCategories.slice(0, 8).map(c => '<div class="cat">' + c + '</div>').join('');
      }
      if (cfg.aboutText) document.getElementById('about-text').textContent = cfg.aboutText;
    }

    function card(p) {
      const href = p.href || '/blog/';
      const img = p.image || '/hero_ai.jpg';
      const desc = p.description || '';
      return '<a class="post-card" href="' + href + '" style="text-decoration:none;color:inherit">' +
             '<div class="post-thumb" style="background-image:url(' + "'" + img + "'" + ');background-size:cover;background-position:center"></div>' +
             '<div class="post-body"><h3>' + p.title + '</h3><p>' + desc + '</p></div></a>';
    }

    function renderPosts(items) {
      const featured = document.getElementById('featured-carousel');
      const latest = document.getElementById('latest-grid');
      const src = (items && items.length ? items : postsFallback).slice(0, 9);
      featured.innerHTML = src.slice(0, 6).map(card).join('');
      latest.innerHTML = src.map(card).join('');
    }

    async function loadBlogFeed() {
      try {
        const r = await fetch('/blog/feed.json', { cache: 'no-store' });
        if (!r.ok) throw new Error('feed not ready');
        const data = await r.json();
        renderPosts(data.posts || []);
      } catch (_) {
        renderPosts([]);
      }
    }

    applyTheme(window.BLOG_THEME || null);
    document.getElementById('year').textContent = new Date().getFullYear();
    loadBlogFeed();
  </script>
</body>
</html>
